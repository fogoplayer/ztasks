<!DOCTYPE HTML>
<html>

<head>
    <!--Web App Setup-->
    <title></title>
    <link rel="manifest" href="manifest.json">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--JS-->
    <script type="module" src="js/main.js"></script>
    <script src="js/futuristic-materialize.js"></script>
    <!--CSS-->
    <link rel="stylesheet" href="css/futuristic-materialize.css">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="iconfont/material-icons.css"> </head>

<body>
    <div class="navbar-fixed">
        <nav>
            <div class="nav-wrapper"> <a href="/" class="sidenav-trigger show-on-large"><i class="material-icons">arrow_back</i></a> <a id="title" class="brand-logo left">Task Details</a>
            </div>
        </nav>
    </div>
    <div class="container">
        <div class="row">
            <div class="col s12 m6" style="height:100%">
                <h5>Notes</h5>
                <div class="input-field">
                    <textarea id="notes" class="materialize-textarea"></textarea>
                </div>
            </div>
            <div class="col s12 m6">
                <h5>Due Date</h5>
                <div class="input-field">
                    <input id="dueDate" type="text" class="datepicker" />
                </div>
            </div>
            <div class="col s12 m6">
                <h5>Reminders</h5>
                <div id="reminders"></div>
                <div id="addReminder">
                    Add a reminder:
                    <br/>
                    <div class="input-field" style="display:inline-block ">
                        <input type="number" style="width:40px;background-color:rgba(0,0,0,.2);text-align:center;margin-right:5px" />
                    </div>
                    <select class="browser-default" style="width:50%; display:inline-block;margin-right:5px">
                        <option value="" disabled selected>Choose duration</option>
                        <option value="3">days</option>
                        <option value="3">weeks</option>
                        <option value="3">months</option>
                    </select>
                    <span> before</span>
                </div>
            </div>

        </div>
    </div>
    </div>
    </div>
</body>
<script>
    M.Datepicker.init(document.querySelectorAll('.datepicker'), {});
    let taskObject;
    let reminders;
    document.addEventListener("DOMContentLoaded", ()=>{
        taskObject = L.getTaskFromId(window.location.hash.substring(1));
        document.getElementById("notes").value = taskObject.notes;
        document.getElementById("dueDate").value = taskObject.dueDate.toLocaleDateString("nu-arab",{month:"long", day:"numeric"});;
        reminders = taskObject.reminders;
    })
    window.onbeforeunload = () => {
        taskObject.notes = document.getElementById("notes").value;
        taskObject.dueDate = new Date(document.getElementById("dueDate").value);
        taskObject.reminders = reminders;
        window.localStorage.setItem("JSON", JSON.stringify(L))
    };
</script>

</html>